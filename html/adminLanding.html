<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Aggregate</title>
    <!-- Bootswatch -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/flatly/bootstrap.min.css"> -->
    <!-- Font-Awesome -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"> -->
    <link rel="stylesheet" href="./style.css">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery.js"></script>
</head>

<body>
<div id = "welcomeDiv"> 
    <!-- <p>Welcome to your homepage.</p> -->
    </div>
    <div id="newBoardForm">
        <p> this is the board (event) creation form. enter data here to add a new board to your account.</p>
        <form action="/submitBoard" method="post">
            <input type="text" name="boardname" placeholder="Board Name">
            <input type="text" name="description" placeholder="Description">
            <input type="text" name="imageLink" placeholder="Image Link">
            <input type="submit">
        </form>
        <br>
    </div>
    <div id="listOfBoards">
    <p>Your Boards: </p>
    </div>
    <br>
    <a href="/logout">Logout</a>
</body>
<script>
$(function() {
    // var url = document.getUrl.split("/")[-1];
    $.get("/myBoards", function(boards) {
        // alert(JSON.stringify(data));
        if (boards !== 'undefined') {
        	var boardDiv = document.getElementById("listOfBoards");
        	for (var i = 0, len = boards.length; i < len; i++) {
        		var board = boards[i];
        		// var newBoard = document.createElement("div");
        		var newBoard = $("<div>");
        		// var a = document.createElement("a");
        		var textnode = "<a href ='/eventPage/"+board._id+"'>"+ board.boardname + "</a> <br>";
        		if (board.imageLink) { 
        		var textnode2 = "<img src = '"+ board.imageLink +"'alt = 'image'> <br> <br>";
        	}
        	else {
        		var textnode2 = "<img src = 'https://static1.squarespace.com/static/55fc0004e4b069a519961e2d/t/55fc301ae4b01342ae9212a1/1442590746805/' alt = 'black square'> <br> <br> "
        	}
        		var textnode3 = board.description + "<br>";


        		newBoard.append(textnode);
        		newBoard.append(textnode3);
        		newBoard.append(textnode2);


        		
        		//newBoard.textContent = "jfksdlfja";
        		// newBoard.appendChild(a);

        		$("#listOfBoards").append(newBoard);
                
                if (i === boards.length-1) {
                    $("#welcomeDiv").append("Welcome to your homepage, " + board.owner+".");
                }
            
        	}

            
        } else {
            alert("Board list is undefined.");
        }
    });
});

//a function to display the user's email
</script>

</html>